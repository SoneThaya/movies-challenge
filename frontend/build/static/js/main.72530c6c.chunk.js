(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n(21),s=n.n(c),o=n(8),i=n(31),l=n(70),j=n(71),d=n(76),u=n(58),b="MOVIE_SEARCH_REQUEST",O="MOVIE_SEARCH_SUCCESS",m="MOVIE_SEARCH_FAIL",p="MOVIE_ADD_NOMINATION_REQUEST",h="MOVIE_ADD_NOMINATION_SUCCESS",x="MOVIE_ADD_NOMINATION_FAIL",g="USER_LOGIN_REQUEST",f="USER_LOGIN_SUCCESS",v="USER_LOGIN_FAIL",S="USER_LOGOUT",I="USER_REGISTER_REQUEST",y="USER_REGISTER_SUCCESS",N="USER_REGISTER_FAIL",E="USER_NOMINATIONS_REQUEST",C="USER_NOMINATIONS_SUCCESS",w="USER_NOMINATIONS_FAIL",k=Object(i.combineReducers)({movieSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movies:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{loading:!0,movies:[]};case O:return{loading:!1,movies:t.payload};case m:return{loading:!1,error:t.payload};default:return e}},movieNoms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{noms:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case h:return{loading:!1,success:!0,noms:[].concat(Object(d.a)(e.noms),[t.payload])};case x:return{loading:!1,error:t.payload};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{loading:!0};case f:return{loading:!1,userInfo:t.payload};case v:return{loading:!1,error:t.payload};case S:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loading:!0};case y:return{loading:!1,userInfo:t.payload};case N:return{loading:!1,error:t.payload};case S:return{};default:return e}},userNominations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nominations:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{loading:!0};case C:return{loading:!1,nominations:t.payload};case w:return{loading:!1,error:t.payload};case S:return{};default:return e}}}),L={nominations:{movieNominations:localStorage.getItem("nomis")?JSON.parse(localStorage.getItem("nomis")):[]},userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},_=[l.a],R=Object(i.createStore)(k,L,Object(j.composeWithDevTools)(i.applyMiddleware.apply(void 0,_))),D=(n(86),n(87),n(14)),T=n(7),U=n(116),A=n(117),M=n(72),G=function(){return Object(a.jsx)("footer",{children:Object(a.jsx)(U.a,{children:Object(a.jsx)(A.a,{children:Object(a.jsx)(M.a,{className:"text-center py-3",children:"Copyright \xa9 sog"})})})})},F=n(51),J=n(123),P=n(118),B=n(121),V=n(15),Q=n.n(V),H=n(25),Y=n(26),W=n.n(Y),q=function(){return function(e){localStorage.removeItem("userInfo"),e({type:S}),document.location.href="/login"}},z=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.userLogin})).userInfo;console.log(t);return Object(a.jsx)("header",{children:Object(a.jsx)(J.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(a.jsxs)(U.a,{children:[Object(a.jsx)(F.LinkContainer,{to:"/",children:Object(a.jsx)(J.a.Brand,{children:"Best Movie Searching Website"})}),Object(a.jsx)(J.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(J.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(P.a,{className:"ml-auto",children:[Object(a.jsx)(F.LinkContainer,{to:"/nominations",children:Object(a.jsxs)(P.a.Link,{children:[Object(a.jsx)("i",{className:"fas fa-film"})," My Nominations"]})}),t?Object(a.jsx)(B.a,{title:t.name,id:"username",children:Object(a.jsx)(B.a.Item,{onClick:function(){e(q())},children:"Logout"})}):Object(a.jsx)(F.LinkContainer,{to:"/login",children:Object(a.jsxs)(P.a.Link,{children:[Object(a.jsx)("i",{className:"fas fa-user"})," Sign In"]})})]})})]})})})},K=n(11),X=n(125),Z=n(75),$="http://www.omdbapi.com/?apikey=",ee=function(e){return function(){var t=Object(H.a)(Q.a.mark((function t(n,a){var r,c;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:p}),t.next=4,W.a.get("".concat($).concat("23ea9c2e","&i=").concat(e.imdbID));case 4:r=t.sent,c=r.data,console.log("action",c),n({type:h,payload:c}),localStorage.setItem("nomis",JSON.stringify(a().movieNoms.noms)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:x,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},te=function(e){var t=e.movie,n=Object(r.useState)([]),c=Object(K.a)(n,2),s=c[0],i=c[1],l=Object(o.b)();Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("nomis"));e&&i(e)}),[s]);return Object(a.jsxs)(X.a,{className:"my-3 p-3 rounded",children:[Object(a.jsx)(D.Link,{to:"/movie/".concat(t.imdbID),children:Object(a.jsx)(X.a.Img,{src:t.Poster,variant:"top"})}),Object(a.jsxs)(X.a.Body,{children:[Object(a.jsx)(D.Link,{to:"/movie/".concat(t.imdbID),children:Object(a.jsx)(X.a.Title,{as:"div",children:Object(a.jsx)("strong",{children:t.Title})})}),Object(a.jsxs)(X.a.Text,{as:"div",children:["Released: ",t.Year]})]}),Object(a.jsx)(Z.a,{className:"btn-block",type:"button",onClick:function(e){e.preventDefault(),l(ee(t))},disabled:s.length>4||s.some((function(e){return e.imdbID===t.imdbID})),children:"Nominate"})]})},ne=n(122),ae=function(){var e=Object(r.useState)(""),t=Object(K.a)(e,2),n=t[0],c=t[1],s=Object(o.b)();return Object(a.jsxs)(ne.a,{onSubmit:function(e){var t;e.preventDefault(),s((t=n,function(){var e=Object(H.a)(Q.a.mark((function e(n){var a,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:b}),e.next=4,W.a.get("".concat($).concat("23ea9c2e","&s=").concat(t));case 4:a=e.sent,r=a.data,n({type:O,payload:r.Search}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:m,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},inline:!0,children:[Object(a.jsx)(ne.a.Control,{type:"text",name:"search",onChange:function(e){return c(e.target.value)},placeholder:"Search Movies...",className:"mr-sm-2 ml-sm-5"}),Object(a.jsx)(Z.a,{type:"submit",variant:"outline-success",className:"p-2",children:"Search"})]})},re=n(119),ce=function(){return Object(a.jsx)(re.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})},se=n(124),oe=function(e){var t=e.variant,n=e.children;return Object(a.jsx)(se.a,{variant:t,children:n})};oe.defaultProps={variant:"info"};var ie=oe,le=function(){Object(o.b)();var e=Object(o.c)((function(e){return e.movieSearch})),t=e.loading,n=e.movies,r=e.error;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Select Movies to Nominate"}),Object(a.jsx)(ae,{}),t?Object(a.jsx)(ce,{}):r?Object(a.jsx)(ie,{children:r}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(A.a,{children:n.map((function(e){return Object(a.jsx)(M.a,{sm:12,md:6,lg:4,xl:3,children:Object(a.jsx)(te,{movie:e})},e.imdbID)}))})})]})},je=n(120),de=n(126),ue=function(e){var t=e.match,n=Object(o.b)(),c=Object(r.useState)({}),s=Object(K.a)(c,2),i=s[0],l=s[1],j=Object(r.useState)([]),d=Object(K.a)(j,2),u=d[0],b=d[1];Object(r.useEffect)((function(){(function(){var e=Object(H.a)(Q.a.mark((function e(){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("http://www.omdbapi.com/?apikey=".concat("23ea9c2e","&i=").concat(t.params.imdbID));case 2:n=e.sent,a=n.data,l(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("nomis"));e&&b(e)}),[u]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(D.Link,{className:"btn btn-dark my-3",to:"/",children:"Go Back"}),Object(a.jsxs)(A.a,{children:[Object(a.jsx)(M.a,{md:6,children:Object(a.jsx)(je.a,{src:i.Poster,alt:i.Title,fluid:!0})}),Object(a.jsx)(M.a,{md:3,children:Object(a.jsxs)(de.a,{variant:"flush",children:[Object(a.jsx)(de.a.Item,{children:Object(a.jsx)("h2",{children:i.Title})}),Object(a.jsx)(de.a.Item,{children:i.Year}),Object(a.jsx)(de.a.Item,{children:Object(a.jsx)("strong",{children:i.Plot})}),Object(a.jsxs)(de.a.Item,{children:["Director: ",i.Director]}),Object(a.jsx)(de.a.Item,{children:Object(a.jsxs)("strong",{children:["Cast: ",i.Actors]})}),Object(a.jsxs)(de.a.Item,{children:["Metascore: ",i.Metascore]})]})}),Object(a.jsx)(M.a,{md:3,children:Object(a.jsx)(X.a,{children:Object(a.jsx)(de.a,{variant:"flush",children:Object(a.jsx)(de.a.Item,{children:Object(a.jsx)(Z.a,{className:"btn-block",type:"button",onClick:function(){n(ee(i))},disabled:u.length>4||u.some((function(e){return e.imdbID===i.imdbID})),children:"Nominate"})})})})})]})]})},be=function(){var e=Object(r.useState)([]),t=Object(K.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("nomis"));c(e)}),[n]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"My Nominated Movies"}),Object(a.jsx)(A.a,{children:n&&n.map((function(e){return Object(a.jsxs)(X.a,{className:"my-3 p-3 rounded",children:[Object(a.jsx)(D.Link,{to:"/movie/".concat(e.imdbID),children:Object(a.jsx)(X.a.Img,{src:e.Poster,variant:"top"})}),Object(a.jsxs)(X.a.Body,{children:[Object(a.jsx)(D.Link,{to:"/movie/".concat(e.imdbID),children:Object(a.jsx)(X.a.Title,{as:"div",children:Object(a.jsx)("strong",{children:e.Title})})}),Object(a.jsxs)(X.a.Text,{as:"div",children:["Released: ",e.Year]})]}),Object(a.jsx)(Z.a,{className:"btn-block",type:"button",onClick:function(){return function(e){var t=JSON.parse(localStorage.getItem("nomis"));t=t.filter((function(t){return t.imdbID!==e})),localStorage.setItem("nomis",JSON.stringify(t))}(e.imdbID)},children:"Remove Nomination"})]},e.imdbID)}))})]})},Oe=function(e){var t=e.children;return Object(a.jsx)(U.a,{children:Object(a.jsx)(A.a,{className:"justify-content-md-center",children:Object(a.jsx)(M.a,{xs:12,md:6,children:t})})})},me=function(e){e.location;var t=e.history,n=Object(r.useState)(""),c=Object(K.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)(""),j=Object(K.a)(l,2),d=j[0],u=j[1],b=Object(o.b)(),O=Object(o.c)((function(e){return e.userLogin})),m=O.loading,p=O.error,h=O.userInfo;Object(r.useEffect)((function(){h&&t.push("/")}),[t,h]);return Object(a.jsxs)(Oe,{children:[Object(a.jsx)("h1",{children:"Sign In"}),p&&Object(a.jsx)(ie,{variant:"danger",children:p}),m&&Object(a.jsx)(ce,{}),Object(a.jsxs)(ne.a,{onSubmit:function(e){e.preventDefault(),b(function(e,t){return function(){var n=Object(H.a)(Q.a.mark((function n(a){var r,c,s;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("actions email",e),console.log("actions password",t),n.prev=2,a({type:g}),r={headers:{"Content-Type":"application/json"}},n.next=7,W.a.post("/api/users/login",{email:e,password:t},r);case 7:c=n.sent,s=c.data,a({type:f,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),a({type:v,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 16:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(e){return n.apply(this,arguments)}}()}(s,d)),console.log("email",s),console.log("password",d)},children:[Object(a.jsxs)(ne.a.Group,{controlId:"email",children:[Object(a.jsx)(ne.a.Label,{children:"Email Address"}),Object(a.jsx)(ne.a.Control,{type:"email",placeholder:"Enter email",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(a.jsxs)(ne.a.Group,{controlId:"password",children:[Object(a.jsx)(ne.a.Label,{children:"Password"}),Object(a.jsx)(ne.a.Control,{type:"password",placeholder:"Enter password",value:d,onChange:function(e){return u(e.target.value)}})]}),Object(a.jsx)(Z.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(a.jsx)(A.a,{className:"py-3",children:Object(a.jsxs)(M.a,{children:["New Customer? ",Object(a.jsx)(D.Link,{to:"/register",children:"Register"})]})})]})},pe=function(e){e.location,e.history;var t=Object(r.useState)(""),n=Object(K.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),l=Object(K.a)(i,2),j=l[0],d=l[1],u=Object(r.useState)(""),b=Object(K.a)(u,2),O=b[0],m=b[1],p=Object(r.useState)(""),h=Object(K.a)(p,2),x=h[0],g=h[1],v=Object(r.useState)(null),S=Object(K.a)(v,2),E=S[0],C=S[1],w=Object(o.b)(),k=Object(o.c)((function(e){return e.userRegister})),L=k.loading,_=k.error;k.userInfo;return Object(a.jsxs)(Oe,{children:[Object(a.jsx)("h1",{children:"Sign Up"}),E&&Object(a.jsx)(ie,{variant:"danger",children:E}),_&&Object(a.jsx)(ie,{variant:"danger",children:_}),L&&Object(a.jsx)(ce,{}),Object(a.jsxs)(ne.a,{onSubmit:function(e){e.preventDefault(),O!==x?C("Passwords do not match"):w(function(e,t,n){return function(){var a=Object(H.a)(Q.a.mark((function a(r){var c,s,o;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:I}),c={headers:{"Content-Type":"application/json"}},a.next=5,W.a.post("/api/users",{name:e,email:t,password:n},c);case 5:s=a.sent,o=s.data,r({type:y,payload:o}),r({type:f,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),r({type:N,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(c,j,O))},children:[Object(a.jsxs)(ne.a.Group,{controlId:"name",children:[Object(a.jsx)(ne.a.Label,{children:"Name"}),Object(a.jsx)(ne.a.Control,{type:"name",placeholder:"Enter name",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(a.jsxs)(ne.a.Group,{controlId:"email",children:[Object(a.jsx)(ne.a.Label,{children:"Email Address"}),Object(a.jsx)(ne.a.Control,{type:"email",placeholder:"Enter email",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(a.jsxs)(ne.a.Group,{controlId:"password",children:[Object(a.jsx)(ne.a.Label,{children:"Password"}),Object(a.jsx)(ne.a.Control,{type:"password",placeholder:"Enter password",value:O,onChange:function(e){return m(e.target.value)}})]}),Object(a.jsxs)(ne.a.Group,{controlId:"confirmPassword",children:[Object(a.jsx)(ne.a.Label,{children:"Confirm Password"}),Object(a.jsx)(ne.a.Control,{type:"password",placeholder:"Confirm password",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(a.jsx)(Z.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(a.jsx)(A.a,{className:"py-3",children:Object(a.jsxs)(M.a,{children:["Have an Account? ",Object(a.jsx)(D.Link,{to:"/login",children:"Login"})]})})]})},he=function(){return Object(a.jsxs)(D.BrowserRouter,{children:[Object(a.jsx)(z,{}),Object(a.jsx)("main",{className:"py-3",children:Object(a.jsxs)(U.a,{children:[Object(a.jsx)(T.d,{exact:!0,path:"/",component:le}),Object(a.jsx)(T.d,{exact:!0,path:"/movie/:imdbID",component:ue}),Object(a.jsx)(T.d,{exact:!0,path:"/nominations",component:be}),Object(a.jsx)(T.d,{exact:!0,path:"/login",component:me}),Object(a.jsx)(T.d,{exact:!0,path:"/register",component:pe})]})}),Object(a.jsx)(G,{})]})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,127)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};R.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.log(n)}}(R.getState())})),s.a.render(Object(a.jsx)(o.a,{store:R,children:Object(a.jsx)(he,{})}),document.getElementById("root")),xe()},86:function(e,t,n){},87:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.72530c6c.chunk.js.map